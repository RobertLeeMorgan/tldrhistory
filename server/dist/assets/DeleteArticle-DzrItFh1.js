import{u as i,j as e,a as h,b as g,c as j,B as n,r as p,q as b,d as f}from"./index-CAM1p30x.js";function y({handleDelete:t,isPending:a}){const{postId:s}=i();return e.jsx("dialog",{id:`my_modal_${s}`,className:"modal z-50",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Delete"}),e.jsx("p",{className:"py-4",children:"Are you sure you would like to delete this article?"}),e.jsxs("div",{className:"modal-action",children:[a?e.jsxs("button",{className:"btn",children:[e.jsx("span",{className:"loading loading-spinner"}),"Deleting"]}):e.jsx("button",{className:"btn btn-secondary",onClick:()=>t(s),children:"Delete"}),e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn",children:"Cancel"})})]})]})})}function D(){const t=h(),{isAuth:a,logout:s}=g(),{postId:l}=i(),{mutate:r,isPending:c,isError:o,error:d,isSuccess:u,reset:m}=j({mutationFn:f});o&&d.message==="jwt expired"?(t("/login"),s(),n("Your session has expired, please log back in.")):o&&n.error("Delete failed, try again later."),p.useEffect(()=>{u&&(document.getElementById(`my_modal_${l}`).close(),b.invalidateQueries({queryKey:["posts"]}),n.success("Your article has been deleted!"),m())});function x(){r({id:l,token:a.token})}return e.jsx(y,{handleDelete:x,isPending:c})}export{D as default};
